#!/bin/bash
set -e
SAB_WORKSPACE="${SAB_WORKSPACE:-$PWD}"
DOCKER_IMAGE="${DOCKER_IMAGE:-sabayon/builder-amd64}"
. /sbin/sabayondevkit-functions.sh

if [ $# -eq 0 ]
  then
   echo "No arguments supplied, at least you should provide some package you wish to compile. e.g. $0 app-text/tree"
   exit 1
fi

check_docker_requirements

docker run --rm -v "$SAB_WORKSPACE"/local_overlay:/usr/local/portage -v "$SAB_WORKSPACE"/portage_artifacts:/usr/portage/packages -ti $DOCKER_IMAGE $@
